<!doctype html><html lang=tr><head><title>.NET’te Kod Kalitesini Zorunlu kılın: .editorconfig & Analyzers & Pre-Commit Hooks :: Berk Selvi | Software Developer</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content=".NET projelerinde kod kalitesini TreatWarningsAsErrors, .editorconfig, SonarAnalyzer, Roslynator ve pre-commit hook’ları kullanarak zorunlu kılın. Takım verimliliğini artırın, kod tutarlılığını sağlayın ve sağlam CI/CD süreçleri oluşturun."><meta name=keywords content="editorconfig,SonarAnalyzer,roslynator,pre-commit,TreatWarningsAsErrors"><meta name=robots content="noodp"><link rel=canonical href=https://berkselvi.dev/tr/posts/enforce-code-quality-in-net-editorconfig-analyzers-pre-commit-hooks/><link rel=stylesheet href=https://berkselvi.dev/assets/style.css><link rel=stylesheet href=https://berkselvi.dev/assets/green.css><link rel=canonical href=https://berkselvi.dev/tr/posts/enforce-code-quality-in-net-editorconfig-analyzers-pre-commit-hooks/><link rel=apple-touch-icon sizes=57x57 href=/icon/apple-icon-57x57.png><link rel=apple-touch-icon sizes=60x60 href=/icon/apple-icon-60x60.png><link rel=apple-touch-icon sizes=72x72 href=/icon/apple-icon-72x72.png><link rel=apple-touch-icon sizes=76x76 href=/icon/apple-icon-76x76.png><link rel=apple-touch-icon sizes=114x114 href=/icon/apple-icon-114x114.png><link rel=apple-touch-icon sizes=120x120 href=/icon/apple-icon-120x120.png><link rel=apple-touch-icon sizes=144x144 href=/icon/apple-icon-144x144.png><link rel=apple-touch-icon sizes=152x152 href=/icon/apple-icon-152x152.png><link rel=apple-touch-icon sizes=180x180 href=/icon/apple-icon-180x180.png><link rel=icon type=image/png sizes=192x192 href=/icon/android-icon-192x192.png><link rel=icon type=image/png sizes=32x32 href=/icon/favicon-32x32.png><link rel=icon type=image/png sizes=96x96 href=/icon/favicon-96x96.png><link rel=icon type=image/png sizes=16x16 href=/icon/favicon-16x16.png><link rel=manifest href=/icon/manifest.json><meta name=msapplication-TileColor content="#1D1E28"><meta name=msapplication-TileImage content="/icon/ms-icon-144x144.png"><meta name=theme-color content="#1D1E28"><meta name=twitter:card content="summary"><meta name=twitter:site content><meta name=twitter:creator content="berkslv"><meta property="og:locale" content="tr"><meta property="og:type" content="article"><meta property="og:title" content=".NET’te Kod Kalitesini Zorunlu kılın: .editorconfig & Analyzers & Pre-Commit Hooks"><meta property="og:description" content=".NET projelerinde kod kalitesini TreatWarningsAsErrors, .editorconfig, SonarAnalyzer, Roslynator ve pre-commit hook’ları kullanarak zorunlu kılın. Takım verimliliğini artırın, kod tutarlılığını sağlayın ve sağlam CI/CD süreçleri oluşturun."><meta property="og:url" content="https://berkselvi.dev/tr/posts/enforce-code-quality-in-net-editorconfig-analyzers-pre-commit-hooks/"><meta property="og:site_name" content="Berk Selvi | Software Developer"><meta property="og:image" content="https://berkselvi.dev/img/enforce-code-quality-in-net-editorconfig-analyzers-pre-commit-hooks/cover.jpg"><meta property="twitter:image" content="https://berkselvi.dev/img/enforce-code-quality-in-net-editorconfig-analyzers-pre-commit-hooks/cover.jpg"><meta property="og:image:width" content="2048"><meta property="og:image:height" content="1024"><meta property="article:published_time" content="2025-07-24 00:00:00 +0300 +0300"><script async src="https://www.googletagmanager.com/gtag/js?id=G-W0L24EMSQ5"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-W0L24EMSQ5")</script><link href=https://berkselvi.dev/css/custom.css rel=stylesheet></head><body class=green><div class="container center headings--one-size"><header class=header><div class=header__inner><div class=menu-trigger><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-menu"><line x1="4" x2="20" y1="12" y2="12"/><line x1="4" x2="20" y1="6" y2="6"/><line x1="4" x2="20" y1="18" y2="18"/></svg></div></div><nav class=menu><ul class="menu__inner menu__inner--desktop"><li><a href=/tr>ana sayfa</a></li><div class=spacer></div><ul class=language-selector><ul class=language-selector-current><li>türkçe ▾</li></ul><ul class="language-selector__more hidden"><li><a href=https://berkselvi.dev/>english</a></li><li><a href=https://berkselvi.dev/tr/>türkçe</a></li></ul></ul></ul><ul class="menu__inner menu__inner--mobile"><li><a href=/tr>ana sayfa</a></li><hr><li><a href=https://berkselvi.dev/>english</a></li><li><a href=https://berkselvi.dev/tr/>türkçe</a></li></ul></nav></header><div class=content><div class=post><h4>Translations;</h4><a href=/posts/enforce-code-quality-in-net-editorconfig-analyzers-pre-commit-hooks/>Enforce Code Quality in .NET: .editorconfig & Analyzers & Pre-Commit Hooks</a><h1 class=post-title><a href=https://berkselvi.dev/tr/posts/enforce-code-quality-in-net-editorconfig-analyzers-pre-commit-hooks/>.NET’te Kod Kalitesini Zorunlu kılın: .editorconfig & Analyzers & Pre-Commit Hooks</a></h1><div class=post-meta><span class=post-date>24 Temmuz 2025
</span><span class=post-author>:: Berk Selvi</span>
<span class=post-reading-time>:: 6 min read (1264 words)</span></div><div class=post-content><div><p>Kod kalitesini korumak ve iyileştirmek yazdığımız her satırda hem kendimize hem de takım arkadaşlarımıza karşı bir sorumluluğumuz olarak düşünüyorum. Bu sorumluluğu uygularken kimi zaman acele yazılan kodlarla, yetişmesi gereken deadline’larla uygulanması gereken pratikleri göz ardı edebiliyoruz. Ayrıca, bu pratikleri takım arkadaşlarımıza yaygınlaştırırken de zorluklar yaşayabiliyoruz.</p><p>Bu tip sorunları aşıp, Kod kalitesini developer’ın inisiyatifine bırakmadan bir zorunluluk haline getirmenin birkaç adımdan oluşan ve 20+ developer’ın çalıştığı, 10+ servisten oluşan projeden çıkarılan deneyimlerle ispatlanan yöntemini paylaşmak istiyorum.</p><p>İlk olarak TreatWarningsAsErrors flag’i ile projenin 1000+ warning ile production’a çıkmasını engelleyeceğiz.</p><p>Devamında .editorconfig dosyaları ile .NET tarafından default olarak sağlanan kurallarla örneğin property isimlendirmeleri takıma yaygınlaştırılması gereken genel-geçer bir kural değil bir zorunluluk haline getireceğiz.</p><p>Bu kuralları SonarAnalyzer ve Roslynator gibi paketlerle geliştirip, sonar taramalarına daha girmeden ilgili sorunları çözüp, daha performanslı ve güvenli kodlar yazacağız.</p><p>Son olarakta pre-commit hook ile, build olmayan projenin ve fail eden testlerin CI/CD pipelinelarında hataya sebep olmadan önce, daha commit atmadan bu testleri görüp, düzelteceğiz. Haydi başlayalım.</p><h2 id=treatwarningsaserrors-ile-warning-içermeyen-proje>TreatWarningsAsErrors ile warning içermeyen proje<a href=#treatwarningsaserrors-ile-warning-içermeyen-proje class=hanchor arialabel=Anchor>&#8983;</a></h2><p>.NET ile proje geliştirirken en çok warning “Possible null reference” ile ortaya çıkıyor. Bu warningle sınırlı olmadan projemizde birçok farklı warning ortaya çıkabilir ve bunlara saygı duymazsak runtime’da her yerde NullReferenceException almamız kadar doğal birşey olamaz.</p><p>Bu tip hatalar daha ortaya çıkmadan çözmek için Warning’lere Error olarak muamele edip, projenin build olmasını engelleyebiliriz. Bunun içinde .csproj dosyasına aşağıdaki flag’i eklememiz yeterlidir.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#f92672>&lt;PropertyGroup&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>&lt;TreatWarningsAsErrors&gt;</span>true<span style=color:#f92672>&lt;/TreatWarningsAsErrors&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>&lt;!-- Sadece gerçekten gerekli ise --&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>&lt;WarningsNotAsErrors&gt;</span>CS0108;NU1901;NU1902;NU1903;NU1904;NU1701<span style=color:#f92672>&lt;/WarningsNotAsErrors&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/PropertyGroup&gt;</span>
</span></span></code></pre></div><p>Ancak bu flag ile .NET platformu tarafından verilen tüm Warning’ler Error olarak görüleceği için örneğin Nuget paketleri tarafından verilen ve bizim tarafımızca çözülemeyecek warningler başımızı çokça ağrıtabilir. Bu tür sorunların üstesinden gelmek içinde WarningsNotAsErrors flag’ini kullanabiliyoruz. Ancak bunu sadece çözülemez hatalar için yapmak önemli.</p><h2 id=editorconfig-ile-projenin-kurallarını-belirleyelim>.editorconfig ile projenin kurallarını belirleyelim<a href=#editorconfig-ile-projenin-kurallarını-belirleyelim class=hanchor arialabel=Anchor>&#8983;</a></h2><p>EditorConfig, aynı proje üzerinde çalışan birden fazla geliştiricinin farklı IDE&rsquo;ler aracılığıyla tutarlı kodlama stilleri korumasına yardımcı olur. .NET projelerine özel bir pratik değildir, dil bağımsızdır ve ortak kuralları olduğu gibi dil özelinde kurallarıda mevcuttur.</p><p>Bu sayede sınıflar <a href=https://learn.microsoft.com/en-us/dotnet/fundamentals/code-analysis/categories>.NET</a> tarafından standart sağlanan kurallar ile örneğin PascalCase, değişkenler camelCase, sabitler LOWER_CASE olmalı gibi kuralları proje seviyesinde tanımlayabiliriz.</p><p>Bu kurallara ek olarak <a href=https://rules.sonarsource.com/csharp/>SonarAnalyzer</a> ile örneğin <code>name == “”</code> gibi facia bir kullanımı sonar taramasına girmeden yakalayıp <code>string.IsNullOrEmpty(name)</code> önerisini Visual Studio kullanıyorsanız Alt+Enter ile direk çözüm önerisini olarak alıp uygulayabilirsiniz. Bu sayede CI/CD adımında sonar taramasına giren kodunuz çok daha az hatayla taramaya başlayacaktır.</p><p>Harika bir diğer code analyzer kütüphanesi olan <a href=https://josefpihrt.github.io/docs/roslynator/>Roslynator</a> sayesinde de çok daha spesifik kuralları projemizde uygulayabiliriz. Örneğin class property’leri arasında bir boşluk olmalı gibi kod okunaklığını arttıran kuralları bu sayede uygulayabiliriz.</p><p>Bu tür third party analyzer kütüphanelerini repo içerisindeki tüm projelere uygulamak için her projeye tek tek uygulamaktansa root dizinde Directory.Build.Props isminde bir dosya oluşturup içeriğini aşağıdaki şekilde oluşturursak build adımında bu paketler tüm projelere otomatik eklenecektir.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#f92672>&lt;Project&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>&lt;ItemGroup&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;PackageReference</span> 
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>Include=</span><span style=color:#e6db74>&#34;Roslynator.Analyzers&#34;</span> 
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>Version=</span><span style=color:#e6db74>&#34;4.12.4&#34;</span>
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>PrivateAssets=</span><span style=color:#e6db74>&#34;all&#34;</span>
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>Condition=</span><span style=color:#e6db74>&#34;$(MSBuildProjectExtension) == &#39;.csproj&#39;&#34;</span> 
</span></span><span style=display:flex><span>    <span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;PackageReference</span> 
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>Include=</span><span style=color:#e6db74>&#34;Roslynator.Formatting.Analyzers&#34;</span> 
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>Version=</span><span style=color:#e6db74>&#34;4.12.4&#34;</span>
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>PrivateAssets=</span><span style=color:#e6db74>&#34;all&#34;</span>
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>Condition=</span><span style=color:#e6db74>&#34;$(MSBuildProjectExtension) == &#39;.csproj&#39;&#34;</span> 
</span></span><span style=display:flex><span>    <span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;PackageReference</span>
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>Include=</span><span style=color:#e6db74>&#34;SonarAnalyzer.CSharp&#34;</span>
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>Version=</span><span style=color:#e6db74>&#34;9.32.0.97167&#34;</span>
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>PrivateAssets=</span><span style=color:#e6db74>&#34;all&#34;</span>
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>Condition=</span><span style=color:#e6db74>&#34;$(MSBuildProjectExtension) == &#39;.csproj&#39;&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>&lt;/ItemGroup&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/Project&gt;</span>
</span></span></code></pre></div><p>Örnek olarak aşağıdaki .editorconfig dosyasına göz atabiliriz. Burada IDE ile tanımlanan kurallar .NET tarafından sağlanan standart kurallar, rcs ile başlayanlar roslynator ve S ile başlayanlar sonar kurallarıdır. Bu kurallar suggestion, warning ve error seviyesiyle tanımlanıp her bir proje için özelleştirilebilir.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># top-most EditorConfig file</span>
</span></span><span style=display:flex><span>root <span style=color:#f92672>=</span> true
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Don&#39;t use tabs for indentation.</span>
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>*<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>indent_style <span style=color:#f92672>=</span> space
</span></span><span style=display:flex><span><span style=color:#75715e># (Please don&#39;t specify an indent_size here; that has too many unintended consequences.)</span>
</span></span><span style=display:flex><span>spelling_exclusion_path <span style=color:#f92672>=</span> SpellingExclusions.dic
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Code files</span>
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>*.<span style=color:#f92672>{</span>cs,csx,vb,vbx<span style=color:#f92672>}]</span>
</span></span><span style=display:flex><span>indent_size <span style=color:#f92672>=</span> <span style=color:#ae81ff>4</span>
</span></span><span style=display:flex><span>insert_final_newline <span style=color:#f92672>=</span> true
</span></span><span style=display:flex><span>charset <span style=color:#f92672>=</span> utf-8-bom
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># XML project files</span>
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>*.<span style=color:#f92672>{</span>csproj,vbproj,vcxproj,vcxproj.filters,proj,projitems,shproj<span style=color:#f92672>}]</span>
</span></span><span style=display:flex><span>indent_size <span style=color:#f92672>=</span> <span style=color:#ae81ff>2</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># XML config files</span>
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>*.<span style=color:#f92672>{</span>props,targets,ruleset,config,nuspec,resx,vsixmanifest,vsct<span style=color:#f92672>}]</span>
</span></span><span style=display:flex><span>indent_size <span style=color:#f92672>=</span> <span style=color:#ae81ff>2</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># JSON files</span>
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>*.json<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>indent_size <span style=color:#f92672>=</span> <span style=color:#ae81ff>2</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Powershell files</span>
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>*.ps1<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>indent_size <span style=color:#f92672>=</span> <span style=color:#ae81ff>2</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Shell script files</span>
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>*.sh<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>end_of_line <span style=color:#f92672>=</span> lf
</span></span><span style=display:flex><span>indent_size <span style=color:#f92672>=</span> <span style=color:#ae81ff>2</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Dotnet code style settings:</span>
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>*.<span style=color:#f92672>{</span>cs,vb<span style=color:#f92672>}]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Sort using and Import directives with System.* appearing first</span>
</span></span><span style=display:flex><span>dotnet_sort_system_directives_first <span style=color:#f92672>=</span> true
</span></span><span style=display:flex><span>dotnet_separate_import_directive_groups <span style=color:#f92672>=</span> false
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># IDE0005: Remove unnecessary using directives</span>
</span></span><span style=display:flex><span>dotnet_diagnostic.IDE0005.severity <span style=color:#f92672>=</span> warning
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># IDE0010: Add missing cases to switch statement </span>
</span></span><span style=display:flex><span>dotnet_diagnostic.IDE0010.severity <span style=color:#f92672>=</span> warning
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Add blank line after using directive list</span>
</span></span><span style=display:flex><span>dotnet_diagnostic.rcs0003.severity <span style=color:#f92672>=</span> error
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Place new line after/before &#39;?:&#39; operator</span>
</span></span><span style=display:flex><span>dotnet_diagnostic.rcs0028.severity <span style=color:#f92672>=</span> error
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Track uses of &#34;TODO&#34; tags</span>
</span></span><span style=display:flex><span>dotnet_diagnostic.S1135.severity <span style=color:#f92672>=</span> suggestion
</span></span></code></pre></div><p>Son olarak bu pratiklerle aşağıdaki gibi bir öneri alarak kodumuzun daha tutarlı ve okunaklı olmasını sağlayabiliyoruz.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>csharp_prefer_braces <span style=color:#f92672>=</span> true:suggestion
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-csharp data-lang=csharp><span style=display:flex><span><span style=color:#75715e>// Good:</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> (isActive)
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>    DoSomething();
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Bad:</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> (isActive)
</span></span><span style=display:flex><span>    DoSomething();
</span></span></code></pre></div><p>Ayrıca GitHub bol yıldızlı repolarında <a href=https://github.com/dotnet/roslyn/blob/main/.editorconfig>dotnet / roslyn</a> ve <a href=https://github.com/christianhelle/refitter/blob/main/.editorconfig>christianhelle / refitter</a> gibi .editorconfig referansları bulabilirsiniz.</p><h2 id=pre-commit-hook-ile-sorunları-lokalde-yakalayalım>pre-commit hook ile sorunları lokalde yakalayalım<a href=#pre-commit-hook-ile-sorunları-lokalde-yakalayalım class=hanchor arialabel=Anchor>&#8983;</a></h2><p>Pre-commit hook’lar, Git’in her commit’ten önce çalıştırdığı scriptlerdir. Kod formatlama, linting veya testlerin çalıştırılması gibi kontroller için oldukça uygundur, sorunlu kodların commitlenmesini engellerler. Testlerde hata alan bir kodu commitlemeyi engellemek kısa vadede sinir bozucu olsa da uzun vadede testleri canlı tutmak adına çok önemli. Eğer CI/CD pipeline’ınızda test adımı varsa o adıma gelmeden önce lokalde sorunları görmemizi sağlar.</p><p>.NET projelerinde bu pre-commit hook’larını register etmek için ek paketlerden yardım alınabilir veya manuel süreçler ile her developer’ın <code>git config core.hooksPath ./.git-hooks</code> komudunu çalıştırması istenebilir. Biz burada projemizi ek bir pakete bağımlı hale getirmeden .NET platformunun bize sağladığı yeteneklerden faydalanacağız.</p><p><code>.csproj</code> dosyanıza aşağıdaki gibi ekleyeceğiniz basit bir MSBuild target’ı ile, her dotnet restore adımında, dolayısıylada build adımında Git hook dizininizin kurulmasını sağlayabilirsiniz. Böylece, projenizde çalışan kim olursa olsun, projeyi build ettiği sürece, ekstra adımlara gerek kalmadan pre-commit hook otomatik olarak yüklenecektir. Ayrıca Production ortamında bu adımı atlıyoruz, böylece CI/CD pipeline’larında ya da prod ortamlarda gereksiz kurulumlar yapılmıyor.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#f92672>&lt;Target</span> <span style=color:#a6e22e>Name=</span><span style=color:#e6db74>&#34;register git hooks&#34;</span> <span style=color:#a6e22e>BeforeTargets=</span><span style=color:#e6db74>&#34;Restore;CollectPackageReferences&#34;</span> <span style=color:#a6e22e>Condition=</span><span style=color:#e6db74>&#34;&#39;$(ASPNETCORE_ENVIRONMENT)&#39; != &#39;Production&#39;&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;Exec</span> <span style=color:#a6e22e>Command=</span><span style=color:#e6db74>&#34;git config core.hooksPath ./.git-hooks&#34;</span> <span style=color:#a6e22e>StandardOutputImportance=</span><span style=color:#e6db74>&#34;Low&#34;</span> <span style=color:#a6e22e>StandardErrorImportance=</span><span style=color:#e6db74>&#34;High&#34;</span> <span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/Target&gt;</span>
</span></span></code></pre></div><p>Projenizin root dizininde <code>.git-hooks</code> adlı bir klasör oluşturun. İçine <code>pre-commit</code> isminde bir dosya oluşturun:</p><p><strong><code>./git-hooks/pre-commit</code></strong></p><pre tabindex=0><code>#!/bin/sh

echo Running tests...
dotnet format
dotnet test
</code></pre><p>Dosyanızı çalıştırılabilir yapmayı unutmayın:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>chmod +x .git-hooks/pre-commit
</span></span></code></pre></div><p>Bu akış sayesinde testlerin hata aldığı durumda commit atamayacağız</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$  git commit -m <span style=color:#e6db74>&#39;failed commit&#39;</span>
</span></span><span style=display:flex><span>Running tests...
</span></span><span style=display:flex><span>  Determining projects to restore...
</span></span><span style=display:flex><span>  All projects are up-to-date <span style=color:#66d9ef>for</span> restore.
</span></span><span style=display:flex><span>  Committer.API -&gt; C:<span style=color:#ae81ff>\P</span>rojects<span style=color:#ae81ff>\P</span>ersonal<span style=color:#ae81ff>\l</span>ecture-net-pre-commit<span style=color:#ae81ff>\s</span>rc<span style=color:#ae81ff>\C</span>ommitter.API<span style=color:#ae81ff>\b</span>in<span style=color:#ae81ff>\D</span>ebug<span style=color:#ae81ff>\n</span>et9.0<span style=color:#ae81ff>\C</span>ommitter.API.dll
</span></span><span style=display:flex><span>  Committer.Tests -&gt; C:<span style=color:#ae81ff>\P</span>rojects<span style=color:#ae81ff>\P</span>ersonal<span style=color:#ae81ff>\l</span>ecture-net-pre-commit<span style=color:#ae81ff>\t</span>ests<span style=color:#ae81ff>\C</span>ommitter.Tests<span style=color:#ae81ff>\b</span>in<span style=color:#ae81ff>\D</span>ebug<span style=color:#ae81ff>\n</span>et9.0<span style=color:#ae81ff>\C</span>ommitter.Tests.dll
</span></span><span style=display:flex><span>Test run <span style=color:#66d9ef>for</span> C:<span style=color:#ae81ff>\P</span>rojects<span style=color:#ae81ff>\P</span>ersonal<span style=color:#ae81ff>\l</span>ecture-net-pre-commit<span style=color:#ae81ff>\t</span>ests<span style=color:#ae81ff>\C</span>ommitter.Tests<span style=color:#ae81ff>\b</span>in<span style=color:#ae81ff>\D</span>ebug<span style=color:#ae81ff>\n</span>et9.0<span style=color:#ae81ff>\C</span>ommitter.Tests.dll <span style=color:#f92672>(</span>.NETCoreApp,Version<span style=color:#f92672>=</span>v9.0<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>VSTest version 17.14.0 <span style=color:#f92672>(</span>x64<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Starting test execution, please wait...
</span></span><span style=display:flex><span>A total of <span style=color:#ae81ff>1</span> test files matched the specified pattern.
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>xUnit.net 00:00:00.14<span style=color:#f92672>]</span>     Committer.Tests.Services.CalculatorServiceTests.Add_ShouldReturnCorrectSum<span style=color:#f92672>(</span>a: 5, b: 3, expected: 7<span style=color:#f92672>)</span> <span style=color:#f92672>[</span>FAIL<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>  Failed Committer.Tests.Services.CalculatorServiceTests.Add_ShouldReturnCorrectSum<span style=color:#f92672>(</span>a: 5, b: 3, expected: 7<span style=color:#f92672>)</span> <span style=color:#f92672>[</span><span style=color:#ae81ff>1</span> ms<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>  Error Message:
</span></span><span style=display:flex><span>   Assert.Equal<span style=color:#f92672>()</span> Failure: Values differ
</span></span><span style=display:flex><span>Expected: <span style=color:#ae81ff>7</span>
</span></span><span style=display:flex><span>Actual:   <span style=color:#ae81ff>8</span>
</span></span><span style=display:flex><span>  Stack Trace:
</span></span><span style=display:flex><span>     at Committer.Tests.Services.CalculatorServiceTests.Add_ShouldReturnCorrectSum<span style=color:#f92672>(</span>Double a, Double b, Double expected<span style=color:#f92672>)</span> in C:<span style=color:#ae81ff>\P</span>rojects<span style=color:#ae81ff>\P</span>ersonal<span style=color:#ae81ff>\l</span>ecture-net-pre-commit<span style=color:#ae81ff>\t</span>ests<span style=color:#ae81ff>\C</span>ommitter.Tests<span style=color:#ae81ff>\S</span>ervices<span style=color:#ae81ff>\C</span>alculatorServiceTests.cs:line <span style=color:#ae81ff>25</span>
</span></span><span style=display:flex><span>   at InvokeStub_CalculatorServiceTests.Add_ShouldReturnCorrectSum<span style=color:#f92672>(</span>Object, Span<span style=color:#e6db74>`</span>1<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>   at System.Reflection.MethodBaseInvoker.InvokeWithFewArgs<span style=color:#f92672>(</span>Object obj, BindingFlags invokeAttr, Binder binder, Object<span style=color:#f92672>[]</span> parameters, CultureInfo culture<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Failed!  - Failed:     1, Passed:    18, Skipped:     0, Total:    19, Duration: <span style=color:#ae81ff>39</span> ms - Committer.Tests.dll <span style=color:#f92672>(</span>net9.0<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>$ git log --oneline
</span></span><span style=display:flex><span>9a89b16 <span style=color:#f92672>(</span>HEAD -&gt; main, origin/main<span style=color:#f92672>)</span> test commit
</span></span><span style=display:flex><span>10367df README.md added
</span></span><span style=display:flex><span><span style=color:#ae81ff>0051724</span> Inital commit
</span></span></code></pre></div><p>Testler başarılı ise commit işlemi gerçekleşecektir:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ git commit -m <span style=color:#e6db74>&#39;succeded commit&#39;</span>
</span></span><span style=display:flex><span>Running tests...
</span></span><span style=display:flex><span>  Determining projects to restore...
</span></span><span style=display:flex><span>  All projects are up-to-date <span style=color:#66d9ef>for</span> restore.
</span></span><span style=display:flex><span>  Committer.API -&gt; C:<span style=color:#ae81ff>\P</span>rojects<span style=color:#ae81ff>\P</span>ersonal<span style=color:#ae81ff>\l</span>ecture-net-pre-commit<span style=color:#ae81ff>\s</span>rc<span style=color:#ae81ff>\C</span>ommitter.API<span style=color:#ae81ff>\b</span>in<span style=color:#ae81ff>\D</span>ebug<span style=color:#ae81ff>\n</span>et9.0<span style=color:#ae81ff>\C</span>ommitter.API.dll
</span></span><span style=display:flex><span>  Committer.Tests -&gt; C:<span style=color:#ae81ff>\P</span>rojects<span style=color:#ae81ff>\P</span>ersonal<span style=color:#ae81ff>\l</span>ecture-net-pre-commit<span style=color:#ae81ff>\t</span>ests<span style=color:#ae81ff>\C</span>ommitter.Tests<span style=color:#ae81ff>\b</span>in<span style=color:#ae81ff>\D</span>ebug<span style=color:#ae81ff>\n</span>et9.0<span style=color:#ae81ff>\C</span>ommitter.Tests.dll
</span></span><span style=display:flex><span>Test run <span style=color:#66d9ef>for</span> C:<span style=color:#ae81ff>\P</span>rojects<span style=color:#ae81ff>\P</span>ersonal<span style=color:#ae81ff>\l</span>ecture-net-pre-commit<span style=color:#ae81ff>\t</span>ests<span style=color:#ae81ff>\C</span>ommitter.Tests<span style=color:#ae81ff>\b</span>in<span style=color:#ae81ff>\D</span>ebug<span style=color:#ae81ff>\n</span>et9.0<span style=color:#ae81ff>\C</span>ommitter.Tests.dll <span style=color:#f92672>(</span>.NETCoreApp,Version<span style=color:#f92672>=</span>v9.0<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>VSTest version 17.14.0 <span style=color:#f92672>(</span>x64<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Starting test execution, please wait...
</span></span><span style=display:flex><span>A total of <span style=color:#ae81ff>1</span> test files matched the specified pattern.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Passed!  - Failed:     0, Passed:    19, Skipped:     0, Total:    19, Duration: <span style=color:#ae81ff>31</span> ms - Committer.Tests.dll <span style=color:#f92672>(</span>net9.0<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>main 0d9f3cf<span style=color:#f92672>]</span> succeded commit
</span></span><span style=display:flex><span> <span style=color:#ae81ff>1</span> file changed, <span style=color:#ae81ff>1</span> insertion<span style=color:#f92672>(</span>+<span style=color:#f92672>)</span>, <span style=color:#ae81ff>1</span> deletion<span style=color:#f92672>(</span>-<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>$ git log --oneline
</span></span><span style=display:flex><span>0d9f3cf <span style=color:#f92672>(</span>HEAD -&gt; main<span style=color:#f92672>)</span> succeded commit
</span></span><span style=display:flex><span>9a89b16 <span style=color:#f92672>(</span>origin/main<span style=color:#f92672>)</span> test commit
</span></span><span style=display:flex><span>10367df README.md added
</span></span><span style=display:flex><span><span style=color:#ae81ff>0051724</span> Inital commit
</span></span></code></pre></div><h2 id=özet>Özet<a href=#özet class=hanchor arialabel=Anchor>&#8983;</a></h2><p>Özetle, .NET projelerinde kod kalitesini geliştirici insiyatifinden çıkarıp, takım genelinde zorunlu hale getirmek için uyguladığımız pratiklere göz attık. <code>TreatWarningsAsErrors</code>, .editorconfig kuralları ve gelişmiş analyzer paketleriyle kodun hem okunabilirliğini hem de güvenliğini arttırdık. Pre-commit hook’ları sayesinde ise hatalı veya testten geçmeyen kodun repoya girmesini baştan engelledik. Bu yaklaşımlarla, takımda sürdürülebilir ve yüksek kaliteli bir yazılım geliştirme kültürü oturtmak mümkün oldu.</p><p>Kaynak koduna erişmek isterseniz projenin tamamını GitHub hesabımda bulabilirsiniz:</p><p><a href=https://github.com/berkslv/lecture-net-pre-commit>github.com/berkslv/lecture-net-pre-commit</a></p><h2 id=kapanış>Kapanış<a href=#kapanış class=hanchor arialabel=Anchor>&#8983;</a></h2><p>Okuduğunuz için teşekkürler! 🎉 Yazılım geliştirme alanındaki araştırmalarımı kaçırmamak için <a href=https://x.com/berkslv>@berkslv</a> adresinden beni takip edebilirsiniz.</p></div></div><div class=pagination><div class=pagination__title><span class=pagination__title-h></span><hr></div><div class=pagination__buttons><span class="button next"><a href=https://berkselvi.dev/tr/posts/feature-flagging-in-dotnet-with-openfeature-and-flagd/><span class=button__text>Feature Flagging in .NET with OpenFeature and flagd</span>
<span class=button__icon>→</span></a></span></div></div><script src=https://utteranc.es/client.js repo=berkslv/berkselvi.dev issue-term=title theme=dark-blue crossorigin=anonymous async></script></div></div><footer class=footer><div class=footer__inner><div class="copyright copyright--user"><span>Made by Berk Selvi.<br>Bu websitesi <a href=https://github.com/berkslv/berkselvi.dev target=_blank>open source</a> olarak yayınlanmıştır.</span></div></div></footer><script src=https://berkselvi.dev/assets/main.js></script><script src=https://berkselvi.dev/assets/prism.js></script><script src=https://berkselvi.dev/assets/languageSelector.js></script></div></body></html>